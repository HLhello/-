## Cha1

- 计算机的五大部分：输入单元，输出单元，CPU的控制单元，CPU的算数逻辑单元，CPU的主存储器单元

- 计算机中的位指的是CPU一次数据读取的最大量，64位CPU就代表CPU一次可以读写64bits的数据，同理可以理解32位的计算机是什么意思

- 所以32位cpu的计算机所能读写的内存的最大的数据量是4GB，

  - 也就是2^32 = 2^10 * 2^10  * 2^10 * 2^2

  - 也就是 4GB = 1024 * 1024 * 1024 * 4
    $$
    1Gb = 1024Mb =1024 * 1024(Kb) =1024 * 1024 * 1024（byte）=1024 * 1024 * 1024 * 8(bit)
    $$













- 文件容量常常使用二进制来计算，网速也可以说是传输二进制的速度

- 速度一般用十进制来衡量  
  - 1GHz = 1000 * 1000 * 1000 Hz
  - Hz也就是秒分之一，反过来，秒就是周期
  - Mbps = Mbits  persecond
  - 频率就是CPU每秒钟可以进行的工作次数

- 硬盘的最小物理量单位是512Bytes，最小的组成单位为扇区sector，硬盘容量通过计算多少个扇区来计算

- HDD,SSD

- 网卡连接界面  PCIe好，PCI为旧版，较慢

- 操作系统也是一组程序，这组程序的重点在于管理计算机的所有活动以及操作系统中的所有硬件

- 操作系统的核心层直接参考硬件规格写成，所以同一个操作系统程序不能够在不以言的硬件架构下运作

- 操作系统只是在管理整个硬件资源，包括CPU，内存，输入输出转置以及文件系统文件

- 应用程序的开发都是参考操作系统提供的开发接口，所以该应用程序只能在该操作系统上面运作

- 操作系统的核心功能有
  - 系统呼叫接口
  - 程序管理
  - 内存管理
  - 文件系统管理
  - 装置的驱动

- 在linux系统中，每个装置都被当做一个文件来对待

- 在linux系统中，几乎多有的硬件装置文件都在/dev这个目录内

- 使用虚拟机学习

- 磁盘为什么要分区
  - 数据的安全性，
  - 系统的效能考虑，有助于数据读取的速度与效能

- 为什么windows系统一般是四个分区
  - 因为Windows系统的主要开机记录区（MBR）包括两个数据，可以安装开机管理程序的数据，以及64bytes 的分区表，分区表的信息存储四个分区的开始位置以及结束位置
  - 四组分区信息称为主要分区槽，或者延伸分区槽
  - 一个大的能分成小的，小的又有更小的分区表，所以可以进行更小的划分
  - 主分（primary）区槽，延伸分（extended）区槽，逻辑分区槽

- linux 是对人多任务的操作系统，每个人都会有自己的工作目录，这个目录是用户可以完全掌控的，所以就称为用户个人家目录，一般来说都在home下main

- 在linux下，隐藏文件并不是什么特殊权限，单纯是因为文档名命名的处理方式来使文件隐藏的，在文件名前加小数点就能使文件隐藏

- 注销并不是关机，只是让账号离开系统而已

- linux 下达指令的一般方法

  - **command  [-optinons]    parameter1 parameter2 ....**
  - command，指令或可执行的脚本（script），为指令的名称，例如变换工作目录等等
  - 在执行options时通常前面有减号，一个减号代表可以是命令缩写，两个减号可能是命令的完整全名
  - parameter为命令附带的参数，或者是选项后面的参数
  - 指令，选项，参数，这几个中间使用空格来区分，不论几个空格，shell命令都视为一个空格
  - [enter]  按下回车命令立即执行
  - 指令太长的时候可以使用反斜杠（\）来跳脱回车符号，使指令连续到下一行，
  - 在linux中系统区分大小写‘

- 在指令模式里面下达指令时，会有两种主要情况

  - 一种是该指令会直接显示结果然后回到命令提示符等待下一指令的输入
  - 一种是进入到该指令的环境，直到结束该指令才回到命令提示字符的环境

- 【tab】，【ctrl】+【c】，【ctrl】+【d】

  - tab键接在一串指令的第一个字的后面，则为命令补全
  - tab键接在一串指令的第二个字后面，则为文件补全
  - ctrl+c是中断目前程序的按键
  - ctrl+d键盘输入结束（End of File或者End of Input），也可以取代exit

- 【--help】，【 man page】与【info page】

  - 使用--help这个选项对命令就有大致的了解了，不过只针对指令
  - man是manual操作说明的简写
  - info与man用途差不多，与man不同的是info时间文件数据拆成一个一个段落，每个段落用自己的页面来编写，并且可以跳转到各个不同的页面中

- 使用命令关键词然后两次tab查看所有以关键词开头的命令，使用--help来查看如何使用，不行在使用 **man【命令】**来查询

- nano 编辑器，文本编辑，挺好用的

  - nano 【文件名】进入nano编辑器
  - Ctrl+x退出编辑器
  - ^代表ctrl键，M代表alt

- 惯用的关机指令  shutdown

- 反斜杠（\）escape

- #代表root的身份登入系统，而$则代表一般身份使用者，依据提示字符的不同，我们可以约略判断吧登入者身份，一般来说建议日常操作使用一般身份

- owner/group/others

- read/write/execute

- 文件拥有者，由于linux使用者并不只有一个人，所以为了保护隐私等一些文件安全，所以就有文件拥有者的概念

- 群组概念，群组的主要功能之一，就是在团队开发的时候，赋予每个群组成员（使用者）不同的权限，来协同开发，有时也不只一个群组在这台服务器上工作，所以需要设置群组的概念

- Permission deny 权限不足

- 使用命令【ls -al】

  | 权限                 | 连接 | 拥有者 | 群组 | 文件容量       | 修改日期 | 文件名 |
  | -------------------- | ---- | ------ | ---- | -------------- | -------- | ------ |
  | permission，十个字符 |      |        |      | 字节单位为byte |          |        |

- 第一个字符有五种情况

  - 【d】，目录document
  - 【-】，文件，file
  - 【l】，连接文件，link file
  - 【b】，装置文件可供存储的接口设备
  - 【c】，装置文件串行端口设备，鼠标，键盘

- 剩下九个字符，三个一组，
  - 第一组文件拥有者权限
  - 第二组加入此群组的成员的权限
  - 其他人的权限

- 第二栏表示有多少文件名连接到此节点

- 改变文件属性与权限
  - chgrp 改变文件所属群组
    - 范例：chgrp 【组名】【文件名】
  - chown 改变问价拥有者
    - 范例：chown 【-R】【账号名称】【文件名或目录】
    - -R  进行递归（recursive）的持续变更，也就是连同次目录下的所有文件都变更，是个参数，也可以不要
  - 也可以群组和拥有者一起变更
    - 范例：chown 【用户名】：【群组名】 文件
  - 为什么要改变群组和所有者呢？
    - 这是在复制文件给别人时，会将拥有者与群组的信息一同复制过去，在某些情况下，文件无法复制后得到文件的用户还是无法修改文件，在这个时候，就需要将文件的所有者信息以及群组信息更改
    - 复制文件的命令： cp 【来源文件】 【目标文件】
    - 将来源文件复制后并且将文件名更名为目标文件名
  - chmod 改变文件的权限

- 数字类型改变文件权限

  - 文件基本权限有九个，分成三个一组，每组都是不同所属者的读写执行的权限，三组分别表示拥有者，所属群组，其他身份，按照二进制将文件的权限设置成421，read4，write2，execute1
  - 三个数组相加也可以表示所属者的权限
  - 使用数组变更文件权限的命令为
    - chmod xyz 文件名（或目录名）

- 符号类型改变文件权限

  - TODO插图
  - chmod  u/g/o/a    +/-/=   r/w/x   文件或目录
  - 例设置文件权限-rwxr-xr-x
  - chmod  u= rwx go= rx  文件名
  - 例：只想增加或者去掉执行权限每个人执行的权限
    - chmod  a +x   文件名
    - chmod a-x 文件名

- 文件一般包括文本文件，数据库文件，二进制可执行文件等等

- 对于x，在windows下，判断一个文件是否具有可执行的能力是通过文件的扩展名来决定的，例如.exe    .bat     .com等等，在linux下文门的文件是否能被执行，是由是否具有x这个权限决定的

- 对于w这个权限，具有写入编辑新增修改文件内容的权限，但是并不具有删除文件的权限，主要是针对文件内容，与文件名是否存在没有关系

- 目录主要的内容在记录文件名列表，文件名与目录有强烈的关联

- 针对目录的读写执行有什么意义呢

  - w对于目录来说，表示具有异动该目录结构列表的权限
    - 建立新的文件与目录
    - 删除已经存在的文件与目录，不论文件权限为何
    - 将已存在的文件或目录进行更名
    - 搬移该目录内的文件目录位置
  - x对于目录代表的是用户能否进入该目录成为工作目录的用途，所谓工作目录
  - TODO插图
  - x对于目录是非常重要的一个权限，拥有该权限可以删除该文件夹下没有读写执行权限的文件 ，就像是一个陌生人将他的私密文件放在你的抽屉里，你虽然不能打开其中的加密文件，但你可以把它扔进垃圾篓里

- 例假设现在有文件夹dir1，文件夹dir2，文件file1，问执行如下指定操作分别需要的最小权限

  - TODO插图

- 要读一个文件时，需要具有这个文件所在目录的x权限，要开放的目录，至少会具备rx这两个权限

- linux文件种类与扩展名

  - 【-】正规文件
    - 纯文本文档（ASCII）可以使用cat命令将他读出来
    - 二进制文件（binary）系统仅认识且可以执行二进制文件，linux中的可执行文件就是这种格式
    - 数据格式文件（data）特定格式的文件可以被称为数据文件，能够使用last命令读出来，使用cat命令读出文件会产生错误
  - 【d】目录
    - 就是目录，类似于文件夹？我感觉好像是
  - 【l】连接文件
    - 类似于windows系统下的快捷方式
  - 【device】设备与装置文件
    - 【b】block区块设备文件 就是一些存储数据，以提供系统随机存取的接口设备，硬盘或者软盘
    - 【c】character字符设备文件，也就是一些串行端口的接口设备，比如键盘鼠标
  - 【s】sockets资料接口文件
    - 这种类型的文件通常被用在网络上的数据承接，我们可以启动一个程序来监听客户端的要求，而客户端可以透过这个socket来进行数据的沟通了，通常在run或者tmp目录中看到这种文件类型
  - 【p】FIFO，pipe数据输送文件
    - FIFO也是一种特殊的文件类型，他的主要目的在解决多个程序同时存取一个文件所造成的错误问题

- **注：** 就有可执行的权限以及具有可执行的程序代码是两回事，可以让一个文件具有可执行的权限但是这个文件显然无法执行，因为他就不具备可执行的程序代码

- 关于liux的一些扩展名  （*为通配符）


  - *.sh：脚本或批处理文件（scripts）因为批处理文件是使用shell写成的，所以扩展名就是.sh
  - *Z， *.tar ,   *.tar.gz， *.zip， *.tgz  是经过打包的压缩文件，压缩软件不同，扩展名就不同
  - *html， *php  网页相关文件

- linux有自己的强制目录FHS


  - TODO插图
  - FHS针对目录树架构仅定义出三层目录下面应该放置什么数据而已

    - /（root，根目录）与开机系统有关
    - /usr(unix software resource)：与软件安装执行有关
    - /var（variable）：与系统的运作过程有关

- 从账号的角度看，root指的是系统管理员的身份，从目录的角度看，root指的是根目录，也就是/

- 根目录是啊整个系统最重要的一个目录，因为不但所有的目录都是有根目录衍生出来的，同时根目录也与开机还原系统修复有关

- 根目录的分区槽越小越好，安装的应用程序最好不要与根目录放在一个分区槽内，这样使得根目录所在的文件系统比较不容易发生问题

- usr是unix software resource的缩写

- TODO插图

- 绝对路径与相对路径


  - 文件名包括路径好像前面说过

  - 绝对路径absolute path 由根目录开始写起的文件名或者目录名称


    - 例：/home/hello/.ss

  - 绝对路径relative path相对于目前路径的文件名写法


    - 例： ./home/hello/.ssss

  - 开头不是/就是相对路径

  - 相对路径是以当前所在路径的相对位置来表示的


    - 例如，当前在/home这个目录下，前往/var/log这个目录
    - 绝对路径 cd /var/log
    - 相对路径 cd ../var/log

  - 【 . 】（一个点）：代表当前的目录，也可以使用【./】来表示
  - 【 . . 】（两个点）：代表上一层目录，也可以使用【../】来表示
  - 例先进入/var/spool/mail/目录，在进入/var/spool/cron/
      - 1： cd /var/spool/mail
        - 2： cd ../cron
  - 相对路径是指相对于目前的工作目录的路径
  - 相对路径在某些情况下是比较放便，但是绝对路径保证任何时候路径都是正确的


  - cd change directory变换目录
  - pwd print working directory 显示当前路径
  - mkdir  make directory创建一个新目录
  - rmdir remove directory删除一个目录
  - 一般登录linux系统后都会在自己的家目录下
  - 使用mkdir创建新目录时，默认情况下是要一层一层的创建目录
	- 使用 -p这个参数可以创建父目录
  - 关于可执行文件路径的变量 $PATH
  - 复制cp移动mv和删除rm
  - 在默认的条件中，cp的来源文件与目的文件的权限是不同的
	- 准确的说如果root使用一般命令复制的文件，文件的所有者仍然是root账户
	- 而目的文件的使用者不是root，并没有root权限，所以在复制文件时要注意保证目的文件的使用者可以正常使用文件
  - mv可以移动文件，也可以将文件重命名，如果要移动多个文件，最后一个是目录
  - 文件内容查询
	- cat tac less more head tail
  - touch有修改文件时间的功能
    - 当然也能用来创建一个文件
  - 文件与目录的默认权限与隐藏权限
    - umask就是指定目前使用者在创建文件或者目录时或的权限默认值
	- 设置文件的默认权限，umask xyz  就可以设置文件的权限
  - 文件的隐藏权限 SUID  SGID  SBIt
	- 上述三个权限分别对应421，
	- suid针对user，sgid针对群组，sbid针对文件
    - suid代表党使用者执行binary程序时没在执行过程中使用者会暂时具有程序拥有者的权限
	- sgid代表使用者在这个目录下面新建的文件之群组都会与该目录的群组名称相同
	- sbit代表在该目录下使用者创建的文件只有自己与root能够删除
  - 利用file指令来查看文件的类型
	- 文件类型 ASCII,Binary,data
  - 指令与文件的搜索
    - 一般我们不常使用find命令，因为find命令特别费硬盘
	- 所以我们一般先使用whereis或者locate来检查
	- locate在使用时直接在后面输入文件的部分名称
  - 时间参数atime，ctime，mtime
    - access time（atime） statustime（ctime）  modificationtime（Mtime）
  - TODO page，340，exercise

  


  认识linux文件系统
  - 


跟女朋友分手了不开心有些事面对起来还是挺难的，开始也是因为一个人无聊你付出些感情还是在分手的时候有失去一块的感觉

彻底的删除他的联系方式了，还保留着手机，还有些后悔，还有些难过

标准输入 stdin 代码为0 是有<或者<<;

标准输出 stdout 代码为1 使用 >或者 >>

标准错误输出 stderr 代码为2 使用2> 或者2>>

使一个>，当输出的文件存在时会清空文件中的内容，更新成当前命令执行的输出，当输出的文件不存在时，会创建新的文件

使用>>，可以实现输出的数据累加

黑洞装置 dev/null

可以吃掉任何导向这个装置的信息，用于忽略错误信息

指令的回传值

cmd1 && cmd2 

若cmd1执行完毕且正确执行（$？=0），则开始执行cmd2

cmd1 || cmd2 

若cmd1 执行完毕且执行错误（$?！= 0）,则开始执行cmd2

也可以将三个命令用逻辑判断连接起来

比如：ls ./xxx && echo "exist" || echo "not exist"

上述命令是查看xxx的文件夹

如果第一个命令执行正确，回传值为零，则执行第二个命令

如果第一个命令执行错误，回传值为非0 则执行第三个命令

但是要注意 || 和 && 的顺序不能放错，由于程序有左到右执行命令

命令的回传值会影响后面的命令是否执行，所以，如果命令的回传值出错，那么就可能出现问题

管线命令

管线命令 | 仅仅能处理经由前面一个指令传来的正确信息，也就是 standard output 的信息，对于standard error 并没有直接处理的能力

管线命令仅仅会处理standard output，对于standard error output会予以忽略

管线命令必须要能够接受来自前一个指令的数据成为 standard input 继续处理才行

分析命令 echo ${PATH} cut -d ':' -f 1

将PATH按照：冒号分隔开，取出第一段

分析命令 last | grep 'root' | cut -d ' ' 0 -f 1 

使用last命令的输出为查看登录用户，将其输出使用grep过滤出root用户的登录信息，在使用grep命令的输出作为cut命令的输入，用空格分隔开来，并取出第一段

排序命令的使用 sort uniq wc

命令分析 last | cut -d ' ' -f 1 |sort | uniq -c

使用last的输出作为cut命令的输入，cut命令的输出作为sort命令的输出sort命令的输入作为uniq 的输入

wc命令得到参数有-l按行 -w按单词 -m按字符

双向重导向tee

可以将命令的输出进行分流，相当于并联一个文件吧我觉得

字符转换命令 tr col join paste expand



正则表达式 是通过一些特殊字符的排列，类搜索、取代、删除一列或者多列字符串，简单地说，正则表达式就是用在字符串的处理上面的一项表达式

正则表达式是以行为单位来进行字符串的处理行为

格式化输出 printf 基本类似于C语言中的printf

awk 数据处理工具

awk主要处理每一行的字段内的数据，而默认的字段的分隔符为空格键或者tab键，awk则比较倾向于一行当中分成数个字段来处理，因此awk相当的适合处理小型的数据处理

命令分析 last -n 5 | awk '{print $1 "\t" $3}'

使用last命令输出登录进入系统的前5个，单后使用管线将其作为stdin 给awk，awk将输入进来的数据每行按照 空格或者tab分成多个字段，dollar符号加上数字代表第几个字段，使用print命令按照格式将其输出

使用awk时$0 代表整个行，NF代表这一行的字总数，NR代表目前awk处理的是第几行的数据，FS目前的分隔字符，默认是空格键

命令分析 

cat /etc/passwd | awk 'BEGIN{FS =":"} $3>10 && $3<5 {print $1 "\t" $3}'

将cat的stdout作为 awk 的stdin  BEGIN表示从第一行开始，如果不加BEGIN第一行可能会出现错误，FS设置分隔符，默认是空格，接着是条件判断，复合条件的输出，接着是输出字段和输出格式

shell scripts 

shell scripts 是利用shell功能缩写的一个程序，这个程序是使用纯文本文件将一些shell的语法与指令写在里面，搭配正规表示法，管线命令与数据流重导向等功能，类似于dos 的。bat





linux的账号与群组

与使用者账号密切相关的两个重要的文件，一个是管理使用者UID/GID重要参数的/etc/passwd，一个是管理密码相关数据的/etc/shadow

/etc/passwd

这个文件每一行都代表一个账号，有几行就代表有几个账号在你的系统中，不过特别注意的是，很多账号本来就是系统正常运作所必须要的，我们可以称其为系统账号

分为七个字段，使用 ‘：’ 分隔

账号名称，密码，UID，GID，用户信息栏，家目录，shell

/etc/shadow

冒号分隔 九个字段

账号名称，密码，最近变动密码日期，密码补课变动的天数，密码需要重新变更的天数，密码需要白那个很期限前的警告天数，密码过期后的宽限时间，密码失效日期，保留

/etc/group

这个文件记录GID与组名的对应

四个字段，冒号分隔

组名，群组密码，GID，此群组支持的账号名称

账号管理

使用者身份切换，su，sudo

只使用su，可以进行root权限的nonloging操作、

使用su-，可以切换root身份，相当于直接变换了身份

使用 su- -c ”命令“ ，可以在执行完命令后返回本来的身份

sudo 默认只有root有权限使用

可以通过使用visudo 命令来使用户可以使用sudo权限，

sudo权限的本身目的是防止root密码的滥用，由管理员分发sudo权限，使用sudo权限时只需要输入自己的密码就能使用

PAM机制

PAM可以说是一套应用程序编程接口，他提供了一连串的验证机制，只要使用者将验证阶段的需求告知PAM后，PAM就能汇报使用使用者验证的结果

也就是说，什么程序都能调用PAM机制来验证是否具有权限

查询使用者 w，who，last，lastlog

用户信息交互 write mesg  wall

使用who查询用户是否在线，以及在线用户的端口号，使用mesg查看信息状态，使用write 用户名 端口号 回车执行命令 输入想要发送的信息，ctrl+d结束输入就能发送了，广播的话使用wall 信息，root用户使用这个命令可以给所有在线的用户发送信息

磁盘配额（Quota）的应用于实践

例行性工作流程（crontab）

进程管理

在linux系统当中，触发一个时间时，系统会将他定义为一个进程，并且基于这个进程一个ID。称为PID，同时依据启发这个进程的用户与相关属性关系，给予这个PID一组有效的权限设定

程序（program）通常为二进制文件，放置在存储媒体中，为实体文件的形态存在

进程（process） 程序被触发后，执行者的权限与属性，程序的程序代码，所需要数据等都会被加载到内存的某一区块中，操作系统给予这个内存区块的一个标识符（PID）可以说进程就是一个正在运作中的程序

&， bg， fg， jobs -l，kill -l， man signal

ps -l 只能查阅自己bash进程，

ps aux 可以查阅所有系统运作的进程

认识系统服务

daemon 和service不用分清楚

认识与分析登录档

登录档：详实而确实的分析以及备份系统的登录文件

cat  /var/log/secure 记载用户信息的文档

系统登录文件默认都几种放置在/var/log/目录内，其中又以messages 记录的信息最多

开机流程。模块管理与loader

基础系统设定与备份策略

tarball是一个软件包，将他解压之后里面的文件通常会有源代码文件，侦测程序文件，本软件的建议说明与安装说明

文件后缀一般有

```
*.tar.gz
*.tgz
*.tar.bz2
*.tar.xz
```

下载 -----》解压----》gcc进行源码编译 ----》 gcc连接 ----》将二进制文件安装在字节的主机上

gcc的简易用法

gcc -c hello.c

会自动生成hello.o这个文件但是并不会生成二进制文件

gcc -O hello.c -c

自动生成hello.o这个文件，并且进行优化

gcc sin.c -lm -L/lib -I/usr/include

这个指令通常在下达最终连接成二进制文件的时候

gcc -o hello hello.c

-o后面是二进制文件名

