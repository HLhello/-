## 1. FPGA的资源

可编程逻辑功能块——类比电路板的各种元器件

可编程I/O口——类比电路板的输入输出

可编程内部互联资源——元器件之间的通信总线

时钟管理单元（PLL，DLL）

- 锁相环 PLL

  ​	PLL （phase locked loop，锁相环），模拟电路

  ​	特性：能够将输入的周期信号就行分频和倍频，并最终输出一个或多个稳定的，与输入信号频率和相位相关的信号

  ​	总结：能够通过对输入的时钟信号进行分频，倍频，相位控制，从而得到一路或者多路更高或者更低的时钟信号

嵌入式存储单元（M9K存储器）

- 每个存储块的容量为9kbit

硬件乘法单元

- 18*18硬件乘法器，乘数和被乘数输入宽度最大为18位的乘法器
- 乘法器电路复杂，使用fpga内部资源能实现，但是性能会受限，也消耗更多的面积，不利于降低成本和功耗
- 硬件乘法单元在芯片设计时功能和布局都已经确定，即使不使用，他也在
- 每个硬件乘法电路也能拆分成两个位宽为9的存储器 

嵌入式硬核处理器（Zynq，Nios II）

## 2.典型电路设计

电源设计

- cyclone IV E 需要三组供电
  - 内核供电   1.0V；非低电压版本为1.2V
  - pll模拟电路供电，数字电路供电1.2V，模拟电路供电固定的2.5V，使用LDO器件 
  - I/O单元供电，电压值从1.2V~3.3V（1.2；1.5；1.8；2.5；3.0；3.3），共6中可选值
    - IO Bank 每个bank的IO供电都可以不同

配置电路设计

- cyclone IV E 基于SRAM的结构的，SPAM掉电就会丢失，因此系统上电后，必须要有配置电路将正确的配置数据加载到SRAM中，然后FPGA才能正常运行
- 五种配置方式（AS，AP，PS，FPP，JTAG）
  - AS 主动串行方式，电路简单，成本低廉，常用语中小容量的FPGA
  - AP主动并行方式，消耗引脚比较多，常用于配置过程的时间要求较高
  - PS被动串行方式，使用一个外部的主机MCU或者CPLD，常用于通过网络方式对fpga的升级
  - JTAG配置方式，可以在器件正常工作过程中捕获运行数据，JTAG指令具有最高优先级

## 3. FPGA 实验环境，及流程

文件夹结构

- 详见工程文件下
- 顶层文件与工程名相同

使用工具

- quartus，modelsim 

使用器件

- EP4CE10F17C8 
- 四代cyclone芯片，10k逻辑单元（LE），封装模式，速度等级为8

流程

- 创建工程，
- 输入设计代码，
- 综合，
- 输入测试（testbench）代码，
- 仿真
- 设置管脚，综合布局布线
- 下载到芯片观察现象

## 4. 时序逻辑电路设计

时序逻辑电路与组合逻辑电路的区别？

- 时序电路输出状态不仅取决于当前输入，也取决与当前的电路状态
- 组合逻辑电路输出只取决于当前输入

## class 1

典型时序逻辑——计数器设计

- 确定时钟信号频率，确定计数器的模
- 同步计数器，异步计数器
- 计数器设计用到了加法器，比较器，寄存器，选择器

#### TCL脚本使用

## class 2

驱动蜂鸣器——定时器设计

- 计数器就是定时器
- 定时器在不同的运行时段，可能器需要的定时时间不同
- 定时器可以循环定时，也可以单词定时
- 电视时间达到时，需要产生标志信号
- 必要是需要对外提供实时计数值

设计定义

- 定时器的定时时间参数可以通过该模块的一个端口输入，通过调剂端口上的值，可以修改时间
- 设置一个计数模式控制信号，当信号为1时，设置为循环定时模式，信号为0时，设置为单次技术模式
- 输出计数器实时计数值，改制将用于产生特定产空比的方波

蜂鸣器介绍

- 压电式适用于报警器
- 电磁式适用于语音设备
- 有源式
- 无源式

变音蜂鸣器——层次化设计模块





