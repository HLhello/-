## 三种状态机写法的区别

- 同步状态机的原理结构和设计
  1. 下一状态 = F（当前状态，输入信号）
  2. 输出信号 = G（当前状态，输入信号）mealy状态机
  3. mealy状态机：时序逻辑的输出不但取决于状态还取决于输入，大部分都是mealy状态机
  4. moore状态机：时序逻辑电路的输出只取决于当前状态

- 时序逻辑电路与组合逻辑电路的区别
  - 时序电路输出状态不仅取决于当前输入，也取决与当前的电路状态
  - 组合逻辑电路输出只取决于当前输入

状态机描述方式，可分为一段式、两段式以及三段式。

- 一段式，整个状态机写到一个 always 模块里面。 在该模块中既描述状态转移，又描述状态的输入和输出。
- 两段式，用两个 always 模块来描述状态机。 其中一个 always 模块采用同步时序描述状态转移， 另一个模块采用组合逻辑判断状态转移条件，描述状态转移规律及其输出。 
- 三段式，在两个 always 模块描述方法基础上，使用三个 always 模块。 一个 always 模块采用同步时序描述状态转移，一个 always 采用组合逻辑判断状态转移条件，描述状态转移规律，另一个 always 模块描述状态输出(可以用组合电路输出，也可以时序电路输出)。 

三种状态机的问题

- 可以看出两段式有限状态机与一段式有限状态机的区别是将时序部分（状态转移）和组合部分（判断状态转移条件和产生输出）分开，写为两个 always 语句，即为两段式有限状态机。将组合部分中的判断状态转移条件和产生输出再分开写，则为三段式有限状态机。
- 二段式在组合逻辑特别复杂时，注意需在后面加一个触发器以消除组合逻辑对输出产生的毛刺的影响。三段式则没有这个问题， 这是由于第三个 always 会生成触发器。其实现在的器件根本不在乎这一点资源消耗，推荐使用二段式或者三段式以及输出寄存的状态机输出来描述有限状态机。
- 编写状态机还应主要注意的事项是，为了避免不必要的锁存器生成，需要穷举所有状态对应的输出动作，或者使用 default 来定义未定义状态动作；
- 在定义状态时， 推荐使用本地化参数定义 localparam，这样可以在编写时状态更清晰且不容易出错，也方便修改；在复位或者跑飞能回到初始态或者预定态；要有异步或者同步复位来确保状态机上电有个初始态。



第六课

1. 状态机
   1. 对具有逻辑顺序和时序规律的时间的一种描述方法，不仅是方法，更是问题的思想
2. 应用思路
   1. 从状态变量入手
   2. 明确电路的输出的关系，相当于状态的输出
3. 基本要素
   1. 状态
   2. 输出
   3. 输入
4. 描述方式  
   1. 状态转移图
   2. 状态转移列表
   3. HDL语言描述
5. 安全、稳定、健壮、不会死循环、受到扰动能复位

