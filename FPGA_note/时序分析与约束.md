# 时序分析与时序约束

例程 class15_HGEX8

clk 是个时钟的角色，但是没有给其相应的时钟属性的分配

约束是针对时钟的

tck——测试时钟输入

有三个时钟信号的模型

slow/fast 1200mV 85C/0C  

温度越高，芯片内信号传输越慢

分析系统观察指标

- 分析建立时间余量的时候，主要观察85C慢速模型下的报告
- 分析保持时间余量的时候，主要观察0C快速模型下的报告

我们关注的是我们这个系统能跑多少兆，能跑多快，也就是系统的最高运行频率

分析和约束是相辅相成的，先有约束，软件才能根据约束进行分析

建立约束方法打给两种，加入约束文件或者使用软件集成的工具向导

- 加入约束文件——新建sdc file，编写sdc文件，使用tcl命令
- 根据工具向导建立约束——assignments-->Timequest
  - clk name创建一个新的时钟--》给时钟一个代号
  - clk pin指定其在文件中的引脚--》
  - period周期为20ns--》
  - rising上升沿的时间--》
  - falling下降沿的时间--》
  - 这就是创建时钟约束的过程，将时钟的基本信息在软件中设置

- 某时钟域的Fmax——由clk这个时钟驱动的所有寄存器里面，最坏路径能够运行的最低时钟频率
- 余量slack，只要余量为正就可以，理论上来说当然是余量越大越好
- Fmax = 1/（period - slack）
- 余量我理解就是还可以再快多少
- 建立时间余量——
- 保持时间余量——
- 最坏路径——
- launch clock
- latch clock 
- clock skew 时钟偏斜，同一时钟从不同路径到达每个触发器的时间差
- relationship
- data arrival path
- data requira path
- slack = dap - drp
- IObuf io缓冲单元
- warst-case timing paths
- FF——D触发器
- clock permision
- 延迟的类型
  - IC——内部连线
  - cell——单元 
  - utco——
  - utso——建立时间

时钟类型

- base基础时钟 
- generate生成时钟

在代码中的#1是在模拟真实寄存器从时钟上升沿到达其时钟管脚后数据要经过一定时间才能发生变化

TTA下的clocks的报告说的是当前工程中各个时钟信号的属性

这些是软件自动分析出来的工程中的一些时钟属性的信号

如果某个被认为是时钟的信号没相关的频率周期的定义，软件就会自动将其按照1000MHz的频率来进行分析

对于clk信号，Fmax = 149.77MHz，当前设计中，由clk信号驱动的寄存器，在clk频率为149.77MHz的时候，刚好还能正常工作

什么叫正常工作

- 数据被稳定的采样

sdc文件的作用

- 编辑器用来优化设计

create clock （约束）：创建时钟约束

```create_clock -name {clk} -period 20.000 -waveform { 0.000 10.000 } [get_ports {clk}]```

创建一个名为clk的时钟约束，这个时钟的周期是20ns，波形是0ns时上升沿，10ns时下降沿，该时钟衣服在具体的物理节点名为clk的端口上

```create_generated_clock -name {pll|altpll_component|auto_generated|pll1|clk[1]} -source [get_pins {pll|altpll_component|auto_generated|pll1|inclk[0]}] -duty_cycle 50.000 -multiply_by 2 -phase -90.000 -master_clock {clk} [get_pins {pll|altpll_component|auto_generated|pll1|clk[1]}]```

创建一个名为clk[1]的生成时钟，这个时钟 的生成源为inclk[0] ，占空比为50%将源时钟信号乘以2，并且移动-90度的相位，母时钟为clk，高生成的时钟信号衣服的具体物理节点为pll的clk1 端口

每个竖杠表示一个层级

如果工程没有添加任何约束文件，或者约束文件中没有任何有效的内容，软件会自动分析并加入软件自动分析出来的时钟信号并加入合理的约束

一旦工程中加入有效的sdc文件中软件就一切以sdc文件中的约束为准，不再自动分析和加入其它信号的约束

使用assignments下的TimeQuest Timing Analyzer wizard创建时钟约束（创建时信号名不必与管脚名相同）

在settings中设置TTA所用的sdc，将不用的sdc文件删除

一个工程中如果添加了多个sdc文件且同时生效的话，软件会一次按照这两个文件中的内容进行约束和报告，如果对某一个节点在多个约束文件中都添加了约束信息，则后执行的约束内容会覆盖掉先执行的约束内容

 创建时钟约束的两个作用

- 指导编译软件对设计进行必要的优化，以使编译结果能够满足设计需求（比如clk要运行在125M，就创建这个时钟的约束并约束频率为125M，那么软件看到这个约束之后，就会去优化这个时钟驱动的所有寄存器相关的布局布线，使这些寄存器之间的数据传输在125M的时候依旧不出错）
- 为了做时序分析软件分析传输路径时的参考，静态时序分析

在设计流程是讲到有两种手段验证设计是否达到要求，其一是后仿真；其二是静态时序分析

 



 





